package modelo.dao;

import java.util.List;

import modelo.beans.Carrito;
import modelo.beans.CarritoPK;
import modelo.beans.Usuario;


public class CarritoDaoImpl extends AbstracDao implements IntCarritoDao {

	@Override
	public int altaCarrito(Carrito carrito) {
		carrito.setCantidad(1);
		int filas = 0; //Si el usuario no existe
		try { //intentar
			tx.begin(); //hacer la transacción 
			em.persist(carrito); //Definimos la transacción con em + método()
			tx.commit(); //Confirmamos la transacción comenzada
			filas = 1; //y decimos que ahora la fila ya tiene un valor
		} catch (Exception e) { //hacemos la excepción
			e.printStackTrace();
		} 
		return filas; //y retornamos las filas
	}

	@Override
	public Carrito findById(int idUsuario, int idProducto) {
		CarritoPK carritopk = new CarritoPK(idUsuario,idProducto);
		return em.find(Carrito.class,carritopk);
	}

	@Override
	public int bajaCarrito(Carrito carrito) {
		// TODO Auto-generated method stub
		return 0;
	}
	@SuppressWarnings("unchecked")
	public List<Carrito> findByAll() {
		sql = "select c from Carrito c";
		query = em.createQuery(sql);
		return query.getResultList();
	}

	@Override
	public int updateCarrito(Carrito carrito) {
		carrito.setCantidad(carrito.getCantidad()+ 1);
		int filas = 0; //Si el usuario no existe
		try { //intentar
			tx.begin(); //hacer la transacción 
			em.merge(carrito); //Definimos la transacción con em + método()
			tx.commit(); //Confirmamos la transacción comenzada
			filas = 1; //y decimos que ahora la fila ya tiene un valor
		} catch (Exception e) { //hacemos la excepción
			e.printStackTrace();
		} 
		return filas; //y retornamos las filas
	}

	@Override
	public List<Carrito> findByUsuario(int idUsuario) {
		// TODO Auto-generated method stub
		return null;
	}




}
